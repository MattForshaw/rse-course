




<!DOCTYPE html>
<!--[if IE 7]> <html lang="en" class="lt-ie9 lt-ie8 no-js"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="lt-ie9 no-js"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="profile" href="http://gmpg.org/xfn/11">
  <link rel="pingback" href="https://www.turing.ac.uk/xmlrpc.php">

  <script src="//use.typekit.net/vul4hnx.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>

    <!--[if (gte IE 6)&(lte IE 8)]>
  <script type="text/javascript" src="https://www.turing.ac.uk/wp-content/themes/ati/assets/js/selectivizr/selectivizr-min.js"></script>
  <noscript><link rel="stylesheet" href="https://www.turing.ac.uk/wp-content/themes/ati/style.css" /></noscript>
  <![endif]-->
  <title>Markup languages</title>

  <!-- This site is optimized with the Yoast SEO plugin v4.8 - https://yoast.com/wordpress/plugins/seo/ -->
  <link rel="canonical" href="" />
  <meta property="og:locale" content="en_GB" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Markup languages" />
  <meta property="og:description" content="" />
  <meta property="og:url" content="https://www.turing.ac.uk/news/cray-provide-cray-urika-gx-system-alan-turing-institute/" />
  <meta property="og:site_name" content="The Alan Turing Institute" />
  <meta property="article:section" content="News" />
  <meta property="article:published_time" content="2017-07-13T09:10:42+01:00" />
  <meta property="og:image" content="https://aticdn.s3-eu-west-1.amazonaws.com/2017/07/1865_RW_Location_39-300x200.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:title" content="Markup languages" />
  <meta name="twitter:image" content="https://aticdn.s3-eu-west-1.amazonaws.com/2017/07/1865_RW_Location_39-300x200.jpg" />
  <!-- / Yoast SEO plugin. -->

  <link rel='dns-prefetch' href='//www.turing.ac.uk' />
  <link rel='dns-prefetch' href='//ajax.googleapis.com' />
  <link rel='dns-prefetch' href='//s.w.org' />
  <link rel="alternate" type="application/rss+xml" title="The Alan Turing Institute &raquo; Feed" href="https://www.turing.ac.uk/feed/" />
    <script type="text/javascript">
      window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.turing.ac.uk\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.5"}};
      !function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
    </script>
    <style type="text/css">
      img.wp-smiley,
      img.emoji {
        display: inline !important;
        border: none !important;
        box-shadow: none !important;
        height: 1em !important;
        width: 1em !important;
        margin: 0 .07em !important;
        vertical-align: -0.1em !important;
        background: none !important;
        padding: 0 !important;
      }
    </style>

  <link href="/rsd-engineeringcourse/css/screen.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/rsd-engineeringcourse/css/jekyll-styles.css" rel="stylesheet" type="text/css">
  <link href="/rsd-engineeringcourse/site-styles/local_styles.css" rel="stylesheet" type="text/css">
  <link href="/rsd-engineeringcourse/site-styles/ipython.css" rel="stylesheet" type="text/css">

  <link rel='stylesheet' id='some_like_it_neat-style-css'  href='/rsd-engineeringcourse/ati_css/style.css' type='text/css' />

  <link rel="shortcut icon" href="/rsd-engineeringcourse/images/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="/rsd-engineeringcourse/favicon-152.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/rsd-engineeringcourse/favicon-144.png">

  <script src="/rsd-engineeringcourse/js/lib/modernizr-custom.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>

    <script>
      var cuttingTheMustard = document.querySelector && window.localStorage && window.addEventListener;

      Modernizr.load({
        //cutting the mustard as used by the BBC
        test: cuttingTheMustard
        //if old browser load the shiv
        ,
        nope: [
          '/rsd-engineeringcourse/js/lib/html5shiv-printshiv.min.js', '/rsd-engineeringcourse/js/lib/respond.min.js'
        ]
      });
      //set conditional assets for main.js
      var globalSiteSpecificVars = {
        pathToJquery: "/rsd-engineeringcourse/js/lib/jquery-1.9.1.min",
        googleAnalyticsIdsArray: [] //specify array of site specific id's NOT UCL generic UA-943297-1
      }
      if (cuttingTheMustard) {
        globalSiteSpecificVars.pathToJquery = '/rsd-engineeringcourse/js/lib/jquery-2.1.1.min';
      }
    </script>
    <script src="/rsd-engineeringcourse/js/lib/require.min.js"></script>
    <script src="/rsd-engineeringcourse/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/rsd-engineeringcourse/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

  <link rel='shortlink' href='https://www.turing.ac.uk/?p=9266' />

        <style>
          .menu-button i.navicon {
            display: none;
          }
        </style>

  <!--
      Plugin: Super Simple Google Analytics
  Plugin URL: Super Simple Google Analytics

  -->

  <script type="text/javascript">
    window.google_analytics_uacct = "UA-87633703-1";
  </script>

</head>

<body id="index" class="layout-vertical layout-vertical--nav-1col">

  <header class="header header--desktop">

  <a class="header__close" href="#">
    <img src="/rsd-engineeringcourse/images/close.png" class="lazy" data-src="//static.ucl.ac.uk/indigo/images/close.png" alt="X" />Close</a>

  <!-- <header id="masthead" class="page-header" role="banner">

      <a class="logo-box" href='https://www.turing.ac.uk'></a>
      <div class="topbox">

  </header> -->

  <div class="wrapper">

    <div class="photograph">
  <div class="brand">
    <!-- <p class="brand__heading">Research Software Engineering with Python</p>
    <a href="/" class="brand__link"><span class="visually-hidden">Home</span></a> -->
    <img src="/rsd-engineeringcourse/img/header_polygon_2400_320.png" data-src="/rsd-engineeringcourse/img/header_polygon_2400_320.png" alt="Turing logo" id="logo" class="brand__logo lazy" href="/rsd-engineeringcourse/">  
  </div>
</div>
 

    <div class="sidebar">

      <nav class="nav nav--mobile">
        <ul>
          




        </ul>
      </nav>

      <nav class="nav nav--left">
        <ul>
          <li><a href="/rsd-engineeringcourse/">Home</a></li>


 <li class="active"> <a href="/rsd-engineeringcourse/ch00python/">Introduction to Python</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/00pythons.html">Many kinds of Python</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/010exemplar.html">An example program</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/015variables.html">Variables</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/016using_functions.html">Using Functions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/023types.html">Types</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/025containers.html">Containers</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/028dictionaries.html">Dictionaries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/029structures.html">Structures</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/030MazeSolution.html">Maze Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/032conditionality.html">Conditionality</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/035looping.html">Looping</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/036MazeSolution2.html">Maze Control Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/037comprehensions.html">Comprehensions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/038SolutionComprehension.html">Maze comprehension solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/040functions.html">Defining functions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/050import.html">Modules</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/101Classes.html">Classes</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch01data/">Research Data in Python</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/060files.html">Working with files</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/061internet.html">Internet</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/062csv.html">CSV</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/064JsonYamlXML.html">Structured Datafiles</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/065MazeSaved.html">Maze Files Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/066QuakeExercise.html">Earthquakes Exercise</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/068QuakesSolution.html">Quakes Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/072plotting.html">Plotting</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/082NumPy.html">Numerical Python</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/084Boids.html">The Boids</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/110Capstone.html">Understanding the Exemplar</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch02git/">Version Control</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/01Intro.html">Introduction to Version Control</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/02Solo.html">Solo Git</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/03Mistakes.html">Fixing Mistakes</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/04Publishing.html">Publishing</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/05Collaboration.html">Collaboration</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/06ForkAndPull.html">Fork and Pull</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/09GitTheory.html">Git Theory</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/10Branches.html">Branches</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/11Miscellany.html">Git miscellany</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/12Remotes.html">Remotes</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/13Rebase.html">Rebase</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/14Bisect.html">Bisect</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch03tests/">Testing</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/01testingbasics.html">Testing Basics</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/02SaskatchewanFields.html">The Fields of Saskatchewan</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/03pytest.html">Test Frameworks</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/04EnergyExample.html">Energy Example</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/05Mocks.html">Mocks</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/06Debugger.html">Debugger</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/07CI.html">Continuous Integration</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/08DiffusionExample.html">Diffusion Example</a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch04packaging/">Software Projects</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/01Installation.html">Installing Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/02Libraries.html">Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/03Argparse.html">Argparse</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/04WritingLibraries.html">Writing Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/05Packaging.html">Packaging</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/06Documentation.html">Documentation</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/07Process.html">Agile and Waterfall</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/08Licensing.html">Licensing</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/09Issues.html">Issue Tracking</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch05construction/">Construction and Design</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/01introduction.html">Construction</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/02conventions.html">Coding Conventions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/03comments.html">Comments</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/05refactoring.html">Refactoring</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/06objects.html">Object Refactorings</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/08objects.html">Object Oriented Design</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/09patterns.html">Design Patterns</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/10boids.html">Exercise - Boids</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/">Advanced Programming Techniques</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/01intro.html">Don't Repeat Yourself</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/020Functional.html">Functional Programming</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/025Iterators.html">Iterators, Generators, Decorators, and Contexts</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/040Exceptions.html">Exceptions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/049Operators.html">Operator Overloading</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/050OperatorsExample.html">Operator Overloading (example)</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/060Metaprogramming.html">Metaprogramming</a> </li></ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch08performance/">Programming for Speed</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/010intro.html">Two Mandelbrots</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/015mandels.html">Faster Mandelbrots?</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/020numpy.html">NumPy</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/040cython.html">Cython</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/050scaling.html">Scaling</a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/">Scientific file formats</a><ul> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/07SerialisationAndNormalisation.html">Serialisation and normalisation</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/08Deserialisation.html">Deserialisation</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/09DSLs.html">Domain specific languages</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/10MarkupLanguages.html">Markup languages</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/11ControlledVocabularies.html">Controlled vocabularies</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/12SemanticModels.html">Semantic models</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch98rubrics/">Assessment</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/Assessment1.html">Packaging Greengraph</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/Assessment2.html">Refactoring the Bad Boids</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/PackagingTreasure.html"></a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/RefactoringTrees.html"></a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/session99/">Installation</a><ul><li class="inactive"> <a href="/rsd-engineeringcourse/session99/linux.html">Linux</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/session99/mac.html">Mac OSX</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/session99/windows.html">Windows</a> </li></ul> </li> 

        </ul>
      </nav>

    </div>
    <!-- end .sidebar -->

    <nav class="nav nav--top">
      <ul>
        
      </ul>
    </nav>

  </div>
  <!-- end .wrapper -->

  </header>
  <!-- end .header -->

  <div class="site-content wrapper">

    <header class="header header--mobile default-header">
      <a class="header__open" href="#">
        <img src="/rsd-engineeringcourse/images/ucl-menu.svg" alt="Menu" />
      </a>
    </header>

    <div class="site-content__inner clearfix">
      <div class="site-content__body">

          
            <nav class="breadcrumb clearfix">
              <ul class="breadcrumb__list">
                <!-- <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/">UCL</a></li>
 
<li class="breadcrumb__item"><a href="/rsd-engineeringcourse/">Research Software Engineering with Python</a></li>
-->



              </ul>
            </nav>
           <div class="site-content__main">
            
               <div id="slidelink">
                 <a href="/rsd-engineeringcourse/ch09fileformats/10MarkupLanguages.ipynb">Notebook download</a>
               </div>
            
            
          
          

    <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Markup-Languages">Markup Languages<a class="anchor-link" href="#Markup-Languages">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>XML and its relatives are based on the idea of <em>marking up</em> content with labels on its purpose:</p>

<pre><code>&lt;name&gt;James&lt;/name&gt; is a &lt;job&gt;Programmer&lt;/job&gt;</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One of the easiest ways to make a markup-language based fileformat is the use of a <em>templating language</em>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">parsereactions</span> <span class="kn">import</span> <span class="n">parser</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Math</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;system.tex&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_latex</span><span class="p">:</span>
    <span class="n">system</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">f_latex</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">Math</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">system</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_latex output_subarea ">
$\displaystyle C_6H_{12}O_6 + 6O_2 \rightarrow 6CO_2 + 6H_2O\\ 
2H_2 + O_2 \rightarrow 2H_2O$
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> chemistry_template.mko
<span class="o">&lt;</span><span class="err">?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="err">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">system</span><span class="o">&gt;</span>
<span class="o">%</span><span class="k">for</span> <span class="n">reaction</span> <span class="ow">in</span> <span class="n">reactions</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">reaction</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">reactants</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="k">for</span> <span class="n">molecule</span> <span class="ow">in</span> <span class="n">reaction</span><span class="o">.</span><span class="n">reactants</span><span class="o">.</span><span class="n">molecules</span><span class="p">:</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{reaction.reactants.molecules[molecule]}</span><span class="s2">&quot;</span><span class="o">&gt;</span>
            <span class="o">%</span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">molecule</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{element.symbol}</span><span class="s2">&quot;</span> <span class="n">number</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{molecule.elements[element]}</span><span class="s2">&quot;</span><span class="o">/&gt;</span>
            <span class="o">%</span><span class="n">endfor</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="n">endfor</span>
        <span class="o">&lt;/</span><span class="n">reactants</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="k">for</span> <span class="n">molecule</span> <span class="ow">in</span> <span class="n">reaction</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">molecules</span><span class="p">:</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{reaction.products.molecules[molecule]}</span><span class="s2">&quot;</span><span class="o">&gt;</span>
            <span class="o">%</span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">molecule</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{element.symbol}</span><span class="s2">&quot;</span> <span class="n">number</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{molecule.elements[element]}</span><span class="s2">&quot;</span><span class="o">/&gt;</span>
            <span class="o">%</span><span class="n">endfor</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="n">endfor</span>
        <span class="o">&lt;/</span><span class="n">products</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">reaction</span><span class="o">&gt;</span>
<span class="o">%</span><span class="n">endfor</span>
<span class="o">&lt;/</span><span class="n">system</span><span class="o">&gt;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing chemistry_template.mko
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">mako.template</span> <span class="kn">import</span> <span class="n">Template</span>

<span class="n">mytemplate</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;chemistry_template.mko&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;system.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xmlfile</span><span class="p">:</span>
    <span class="n">xmlfile</span><span class="o">.</span><span class="n">write</span><span class="p">((</span><span class="n">mytemplate</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="n">system</span><span class="p">))))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat system.xml
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;system&gt;
    &lt;reaction&gt;
        &lt;reactants&gt;
            &lt;molecule stoichiometry=&#34;1&#34;&gt;
                &lt;atom symbol=&#34;C&#34; number=&#34;6&#34;/&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;12&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;6&#34;/&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/reactants&gt;
        &lt;products&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;C&#34; number=&#34;1&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;2&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;1&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/products&gt;
    &lt;/reaction&gt;
    &lt;reaction&gt;
        &lt;reactants&gt;
            &lt;molecule stoichiometry=&#34;2&#34;&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;1&#34;&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/reactants&gt;
        &lt;products&gt;
            &lt;molecule stoichiometry=&#34;2&#34;&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;2&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;1&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/products&gt;
    &lt;/reaction&gt;
&lt;/system&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Markup languages are verbose (jokingly called the "angle bracket tax") but very clear.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-as-text">Data as text<a class="anchor-link" href="#Data-as-text">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The above serialisation specifies all data as XML "Attributes". An alternative is to put the data in the text:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> chemistry_template2.mko
<span class="o">&lt;</span><span class="err">?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="err">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">system</span><span class="o">&gt;</span>
<span class="o">%</span><span class="k">for</span> <span class="n">reaction</span> <span class="ow">in</span> <span class="n">reactions</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">reaction</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">reactants</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="k">for</span> <span class="n">molecule</span> <span class="ow">in</span> <span class="n">reaction</span><span class="o">.</span><span class="n">reactants</span><span class="o">.</span><span class="n">molecules</span><span class="p">:</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{reaction.reactants.molecules[molecule]}</span><span class="s2">&quot;</span><span class="o">&gt;</span>
            <span class="o">%</span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">molecule</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{element.symbol}</span><span class="s2">&quot;</span><span class="o">&gt;</span><span class="err">$</span><span class="p">{</span><span class="n">molecule</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">element</span><span class="p">]}</span><span class="o">&lt;/</span><span class="n">atom</span><span class="o">&gt;</span>
            <span class="o">%</span><span class="n">endfor</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="n">endfor</span>
        <span class="o">&lt;/</span><span class="n">reactants</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="k">for</span> <span class="n">molecule</span> <span class="ow">in</span> <span class="n">reaction</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">molecules</span><span class="p">:</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{reaction.products.molecules[molecule]}</span><span class="s2">&quot;</span><span class="o">&gt;</span>
            <span class="o">%</span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">molecule</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{element.symbol}</span><span class="s2">&quot;</span><span class="o">&gt;</span><span class="err">$</span><span class="p">{</span><span class="n">molecule</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">element</span><span class="p">]}</span><span class="o">&lt;/</span><span class="n">atom</span><span class="o">&gt;</span>
            <span class="o">%</span><span class="n">endfor</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
        <span class="o">%</span><span class="n">endfor</span>
        <span class="o">&lt;/</span><span class="n">products</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">reaction</span><span class="o">&gt;</span>
<span class="o">%</span><span class="n">endfor</span>
<span class="o">&lt;/</span><span class="n">system</span><span class="o">&gt;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing chemistry_template2.mko
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">mako.template</span> <span class="kn">import</span> <span class="n">Template</span>

<span class="n">mytemplate</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;chemistry_template2.mko&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;system2.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xmlfile</span><span class="p">:</span>
    <span class="n">xmlfile</span><span class="o">.</span><span class="n">write</span><span class="p">((</span><span class="n">mytemplate</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="n">system</span><span class="p">))))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat system2.xml
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;system&gt;
    &lt;reaction&gt;
        &lt;reactants&gt;
            &lt;molecule stoichiometry=&#34;1&#34;&gt;
                &lt;atom symbol=&#34;C&#34;&gt;6&lt;/atom&gt;
                &lt;atom symbol=&#34;H&#34;&gt;12&lt;/atom&gt;
                &lt;atom symbol=&#34;O&#34;&gt;6&lt;/atom&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;O&#34;&gt;2&lt;/atom&gt;
            &lt;/molecule&gt;
        &lt;/reactants&gt;
        &lt;products&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;C&#34;&gt;1&lt;/atom&gt;
                &lt;atom symbol=&#34;O&#34;&gt;2&lt;/atom&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;H&#34;&gt;2&lt;/atom&gt;
                &lt;atom symbol=&#34;O&#34;&gt;1&lt;/atom&gt;
            &lt;/molecule&gt;
        &lt;/products&gt;
    &lt;/reaction&gt;
    &lt;reaction&gt;
        &lt;reactants&gt;
            &lt;molecule stoichiometry=&#34;2&#34;&gt;
                &lt;atom symbol=&#34;H&#34;&gt;2&lt;/atom&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;1&#34;&gt;
                &lt;atom symbol=&#34;O&#34;&gt;2&lt;/atom&gt;
            &lt;/molecule&gt;
        &lt;/reactants&gt;
        &lt;products&gt;
            &lt;molecule stoichiometry=&#34;2&#34;&gt;
                &lt;atom symbol=&#34;H&#34;&gt;2&lt;/atom&gt;
                &lt;atom symbol=&#34;O&#34;&gt;1&lt;/atom&gt;
            &lt;/molecule&gt;
        &lt;/products&gt;
    &lt;/reaction&gt;
&lt;/system&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-XML">Parsing XML<a class="anchor-link" href="#Parsing-XML">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>XML is normally parsed by building a tree-structure of all the <code>tags</code> in the file, called a <code>DOM</code> or Document Object Model.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;system.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xmlfile</span><span class="p">:</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xmlfile</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="nb">str</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;system&gt;
    &lt;reaction&gt;
        &lt;reactants&gt;
            &lt;molecule stoichiometry=&#34;1&#34;&gt;
                &lt;atom symbol=&#34;C&#34; number=&#34;6&#34;/&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;12&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;6&#34;/&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/reactants&gt;
        &lt;products&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;C&#34; number=&#34;1&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;6&#34;&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;2&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;1&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/products&gt;
    &lt;/reaction&gt;
    &lt;reaction&gt;
        &lt;reactants&gt;
            &lt;molecule stoichiometry=&#34;2&#34;&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
            &lt;molecule stoichiometry=&#34;1&#34;&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;2&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/reactants&gt;
        &lt;products&gt;
            &lt;molecule stoichiometry=&#34;2&#34;&gt;
                &lt;atom symbol=&#34;H&#34; number=&#34;2&#34;/&gt;
                &lt;atom symbol=&#34;O&#34; number=&#34;1&#34;/&gt;
            &lt;/molecule&gt;
        &lt;/products&gt;
    &lt;/reaction&gt;
&lt;/system&gt;

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can navigate the tree, with each <strong>element</strong> being an iterable yielding its children:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;stoichiometry&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;6&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Searching-XML">Searching XML<a class="anchor-link" href="#Searching-XML">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>xpath</code> is a sophisticated tool for searching XML DOMs:</p>
<p>There's a good explanation of how it works here: <a href="https://www.w3schools.com/xml/xml_xpath.asp">https://www.w3schools.com/xml/xml_xpath.asp</a> but the basics are reproduced below.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<table>
<thead><tr>
<th style="text-align:left">XPath Expression</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/bookstore/book[1]</code></td>
<td style="text-align:left">Selects the first <code>book</code> that is the child of a <code>bookstore</code></td>
</tr>
<tr>
<td style="text-align:left"><code>/bookstore/book[last()]</code></td>
<td style="text-align:left">Selects the last <code>book</code> that is the child of a <code>bookstore</code></td>
</tr>
<tr>
<td style="text-align:left"><code>/bookstore/book[last()-1]</code></td>
<td style="text-align:left">Selects the last but one <code>book</code> that is the child of a <code>bookstore</code></td>
</tr>
<tr>
<td style="text-align:left"><code>/bookstore/book[position()&lt;3]</code></td>
<td style="text-align:left">Selects the first two <code>book</code>s that are children of a <code>bookstore</code></td>
</tr>
<tr>
<td style="text-align:left"><code>//title[@lang]</code></td>
<td style="text-align:left">Selects all <code>title</code>s that have an attribute named "lang"</td>
</tr>
<tr>
<td style="text-align:left"><code>//title[@lang='en']</code></td>
<td style="text-align:left">Selects all <code>title</code>s that have a "lang" attribute with a value of "en"</td>
</tr>
<tr>
<td style="text-align:left"><code>/bookstore/book[price&gt;35.00]</code></td>
<td style="text-align:left">Selects all <code>book</code>s that are children of a <code>bookstore</code> and have a <code>price</code> with a value greater than 35.00</td>
</tr>
<tr>
<td style="text-align:left"><code>/bookstore/book[price&gt;35.00]/title</code></td>
<td style="text-align:left">Selects all the <code>title</code>s of a <code>book</code> of a <code>bookstore</code> that have a <code>price</code> with a value greater than 35.00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># For all molecules</span>
<span class="c1"># ... with a child atom whose number attribute is &#39;1&#39;</span>
<span class="c1"># ... return the symbol attribute of that child</span>
<span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//molecule/atom[@number=&#39;1&#39;]/@symbol&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;C&#39;, &#39;O&#39;, &#39;O&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is useful to understand grammars like these using the "FOR-LET-WHERE-ORDER-RETURN" (pronounced Flower) model.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The above says: "For element in molecules where number is one, return symbol", roughly equivalent to <code>[element.symbol for element in molecule for molecule in document if element.number==1]</code> in Python.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;system2.xml&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xmlfile</span><span class="p">:</span>
    <span class="n">tree2</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xmlfile</span><span class="p">)</span>
<span class="c1"># For all molecules with a child atom whose text is 1</span>
<span class="c1"># ... return the symbol attribute of any child (however deeply nested)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tree2</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//molecule[atom=1]//@symbol&quot;</span><span class="p">))</span>   
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;C&#39;, &#39;O&#39;, &#39;H&#39;, &#39;O&#39;, &#39;H&#39;, &#39;O&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note how we select on text content rather than attributes by using the element tag directly. The above says "for every molecule where at least one element is present with just a single atom, return all the symbols of all the elements in that molecule."</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Transforming-XML-:-XSLT">Transforming XML : XSLT<a class="anchor-link" href="#Transforming-XML-:-XSLT">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Two technologies (XSLT and XQUERY) provide capability to produce text output from an XML tree.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll look at XSLT as support is more widespread, including in the python library we're using. XQuery is probably easier to use and understand, but with less support.</p>
<p>However, XSLT is a beautiful functional declarative language, once you read past the angle-brackets.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here's an XSLT to transform our reaction system into a LaTeX representation:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> xmltotex.xsl

<span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">stylesheet</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;2.0&quot;</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">xsl</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">output</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span> <span class="n">indent</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span> <span class="n">omit</span><span class="o">-</span><span class="n">xml</span><span class="o">-</span><span class="n">declaration</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span> <span class="o">/&gt;</span>
        
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">Decompose</span> <span class="n">reaction</span> <span class="n">into</span> <span class="s2">&quot;reactants </span><span class="se">\r</span><span class="s2">ightarrow products&quot;</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;//reaction&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;reactants&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span> \<span class="n">rightarrow</span> <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;products&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span>\\<span class="o">&amp;</span><span class="c1">#xa;&lt;/xsl:text&gt;</span>
    <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span><span class="o">&gt;</span>
        
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">For</span> <span class="n">a</span> <span class="n">molecule</span> <span class="n">anywhere</span> <span class="k">except</span> <span class="n">the</span> <span class="n">first</span> <span class="n">position</span> <span class="n">write</span> <span class="s2">&quot; + &quot;</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">molecules</span><span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;//molecule[position()!=1]&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;@stoichiometry&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">For</span> <span class="n">a</span> <span class="n">molecule</span> <span class="ow">in</span> <span class="n">first</span> <span class="n">position</span> <span class="n">write</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">molecules</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;//molecule[position()=1]&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;@stoichiometry&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">If</span> <span class="n">the</span> <span class="n">stoichiometry</span> <span class="ow">is</span> <span class="n">one</span> <span class="n">then</span> <span class="n">ignore</span> <span class="n">it</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;@stoichiometry[.=&#39;1&#39;]&quot;</span><span class="o">/&gt;</span>
    
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">Otherwise</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">default</span> <span class="n">template</span> <span class="k">for</span> <span class="n">attributes</span><span class="p">,</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">just</span> <span class="n">to</span> <span class="n">copy</span> <span class="n">value</span> <span class="o">--&gt;</span>
    
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">Decompose</span> <span class="n">element</span> <span class="n">into</span> <span class="s2">&quot;symbol number&quot;</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;//atom&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">value</span><span class="o">-</span><span class="n">of</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;@symbol&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">apply</span><span class="o">-</span><span class="n">templates</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;@number&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span><span class="o">&gt;</span>
        
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">If</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">elements</span><span class="o">/</span><span class="n">molecules</span> <span class="ow">is</span> <span class="n">one</span> <span class="n">then</span> <span class="n">ignore</span> <span class="n">it</span> <span class="o">--&gt;</span>        
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;@number[.=1]&quot;</span><span class="o">/&gt;</span>
    
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="o">...</span> <span class="n">otherwise</span> <span class="n">replace</span> <span class="n">it</span> <span class="k">with</span> <span class="s2">&quot;_ value&quot;</span> <span class="o">--&gt;</span>        
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;@number[.!=1][10&gt;.]&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">value</span><span class="o">-</span><span class="n">of</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span><span class="o">&gt;</span>
        
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">If</span> <span class="n">a</span> <span class="n">number</span> <span class="ow">is</span> <span class="n">greater</span> <span class="n">than</span> <span class="mi">10</span> <span class="n">then</span> <span class="n">wrap</span> <span class="n">it</span> <span class="ow">in</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span> <span class="o">--&gt;</span>        
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;@number[.!=1][.&gt;9]&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span><span class="n">_</span><span class="p">{</span><span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">value</span><span class="o">-</span><span class="n">of</span> <span class="n">select</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">text</span><span class="o">&gt;</span>          
    <span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span><span class="o">&gt;</span>
        
    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">Do</span> <span class="ow">not</span> <span class="n">copy</span> <span class="nb">input</span> <span class="n">whitespace</span> <span class="n">to</span> <span class="n">output</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">xsl</span><span class="p">:</span><span class="n">template</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;text()&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">xsl</span><span class="p">:</span><span class="n">stylesheet</span><span class="o">&gt;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing xmltotex.xsl
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;xmltotex.xsl&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xslfile</span><span class="p">:</span>
    <span class="n">transform_xsl</span> <span class="o">=</span> <span class="n">xslfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">transform</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">XSLT</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="n">transform_xsl</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">transform</span><span class="p">(</span><span class="n">tree</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>C_6H_{12}O_6 + 6O_2 \rightarrow 6CO_2 + 6H_2O\\
2H_2 + O_2 \rightarrow 2H_2O\\


</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">Math</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">transform</span><span class="p">(</span><span class="n">tree</span><span class="p">))))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_latex output_subarea ">
$\displaystyle C_6H_{12}O_6 + 6O_2 \rightarrow 6CO_2 + 6H_2O\\
2H_2 + O_2 \rightarrow 2H_2O\\

$
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Validating-XML-:-Schema">Validating XML : Schema<a class="anchor-link" href="#Validating-XML-:-Schema">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>XML Schema is a way to define how an XML file is allowed to be: which attributes and tags should exist where.</p>
<p>You should always define one of these when using an XML file format.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> reactions.xsd

<span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">schema</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">xs</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;atom&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">attribute</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;symbol&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:string&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">attribute</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;number&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:integer&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span><span class="o">&gt;</span>
    
<span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;molecule&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;atom&quot;</span> <span class="n">maxOccurs</span><span class="o">=</span><span class="s2">&quot;unbounded&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">attribute</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;stoichiometry&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:integer&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span><span class="o">&gt;</span>
    
<span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reaction&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reactants&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;molecule&quot;</span> <span class="n">maxOccurs</span><span class="o">=</span><span class="s2">&quot;unbounded&quot;</span><span class="o">/&gt;</span>
                    <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;products&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;molecule&quot;</span> <span class="n">maxOccurs</span><span class="o">=</span><span class="s2">&quot;unbounded&quot;</span><span class="o">/&gt;</span>
                    <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;reaction&quot;</span> <span class="n">maxOccurs</span><span class="o">=</span><span class="s2">&quot;unbounded&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">sequence</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">complexType</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">element</span><span class="o">&gt;</span>
    
<span class="o">&lt;/</span><span class="n">xs</span><span class="p">:</span><span class="n">schema</span><span class="o">&gt;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing reactions.xsd
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;reactions.xsd&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xsdfile</span><span class="p">:</span>
    <span class="n">schema_xsd</span> <span class="o">=</span> <span class="n">xsdfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">schema</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLSchema</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="n">schema_xsd</span><span class="p">))</span>    
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">parser</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLParser</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;system.xml&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xmlfile</span><span class="p">:</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xmlfile</span><span class="p">,</span> <span class="n">parser</span><span class="p">)</span>
<span class="c1"># For all atoms return their symbol attribute</span>
<span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//atom/@symbol&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;C&#39;, &#39;H&#39;, &#39;O&#39;, &#39;O&#39;, &#39;C&#39;, &#39;O&#39;, &#39;H&#39;, &#39;O&#39;, &#39;H&#39;, &#39;O&#39;, &#39;H&#39;, &#39;O&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Compare parsing something that is not valid under the schema:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> invalid_system.xml

<span class="o">&lt;</span><span class="n">system</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">reaction</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">reactants</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;two&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;H&quot;</span> <span class="n">number</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;O&quot;</span> <span class="n">number</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">reactants</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">molecule</span> <span class="n">stoichiometry</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;H&quot;</span> <span class="n">number</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">atom</span> <span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;O&quot;</span> <span class="n">number</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">molecule</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">products</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">reaction</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">system</span><span class="o">&gt;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing invalid_system.xml
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;invalid_system.xml&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">xmlfile</span><span class="p">:</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xmlfile</span><span class="p">,</span> <span class="n">parser</span><span class="p">)</span>
    <span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//element//@symbol&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLSyntaxError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Element &#39;molecule&#39;, attribute &#39;stoichiometry&#39;: &#39;two&#39; is not a valid value of the atomic type &#39;xs:integer&#39;. (&lt;string&gt;, line 0)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This shows us that the validation has failed and why.</p>

</div>
</div>
</div>
 




        </div>

      </div>
    </div>

  </div>
  <!-- end .site-content -->

  <footer class="footer wrapper">
  <div class="footer__inner clearfix">
        <article class="block block--col-1">

          <h2 class="as-h5"><a href="https://www.turing.ac.uk">The Alan Turing Institute</a></h2>

          <ul class="footer__list list-unstyled">
          <li class="footer__item"><a href="https://www.turing.ac.uk/transparency-notice">Transparency notice</a></li>
          <li class="footer__item"><a href="https://www.turing.ac.uk/research/research-engineering">Contact the Research Engineering Group</a></li>

          </ul>
      </article>
  </div>
</footer>


  <script src="/rsd-engineeringcourse/js/lib/require.min.js"></script>
  <script src="/rsd-engineeringcourse/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/rsd-engineeringcourse/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

</body>

</html>

